# Standard build + test job

parameters:
  name: ''
  vmImage: ''
  container: ''
  buildType: 'RELEASE'
  threads: 2

jobs:

 - job: ${{ parameters.name }}_${{ parameters.buildType }}

   # We're seeing jobs take about an hour sometimes!
   timeoutInMinutes: 100


   ${{ if ne(parameters.container, '') }}:
      container: ${{ parameters.container }}

   pool:
     vmImage: ${{ parameters.vmImage }}

   variables:
     ARNOLD_ROOT: $(System.DefaultWorkingDirectory)/arnoldRoot
     DELIGHT: $(System.DefaultWorkingDirectory)/3delight

   steps:

     - script: |
         echo XXX > test.txt

     - task: AzureFileCopy@3
       inputs:
         SourcePath: 'test.txt'
         azureSubscription: 'Azure Upload Connection'
         Destination: 'AzureBlob'
         storage: 'gafferhq'
         ContainerName: 'builds'
